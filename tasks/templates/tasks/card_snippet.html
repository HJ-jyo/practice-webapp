<div class="card mb-3 shadow-sm border-0 border-start border-4 border-{{ color }} rounded-3 kanban-card">
    <div class="card-body p-3">
        
        <div class="d-flex justify-content-between align-items-center mb-2">
            {% if task.category %}
                <span class="badge bg-light text-secondary border rounded-pill px-2 small">
                    {{ task.category.name }}
                </span>
            {% else %}
                <span></span>
            {% endif %}
            <small class="text-muted" style="font-size: 0.75rem;">
                {{ task.created_at|date:"m/d" }}
            </small>
        </div>

        <h6 class="card-title fw-bold text-dark mb-2 task-title" style="line-height: 1.4;">
            {{ task.title }}
        </h6>

        <div class="d-flex justify-content-between align-items-center mt-3 pt-2 border-top border-light">
            
            {% if not is_done %}
                <form action="{% url next_url task.pk %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-{{ btn_color }} rounded-pill px-3 fw-bold" style="font-size: 0.8rem;">
                        <i class="bi bi-check2"></i> {{ btn_text }}
                    </button>
                </form>
            {% else %}
                <div></div>
            {% endif %}

            <a href="{% url 'task_edit' task.pk %}" class="btn btn-sm btn-light text-secondary border rounded-pill shadow-sm fw-bold" style="font-size: 0.8rem;">
                <i class="bi bi-pencil-square me-1"></i>詳細
            </a>
            
        </div>
    </div>
</div>