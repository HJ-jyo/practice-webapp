{% extends 'base.html' %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto; width: 100%;">
    
    <div style="margin-bottom: 24px; text-align: center;">
        <h2 style="font-size: 24px; font-weight: 800; color: var(--text-main); margin-bottom: 8px;">
            {% if form.instance.pk %}タスクを編集{% else %}新しいタスクを作成{% endif %}
        </h2>
        <p style="color: var(--text-sub); font-size: 14px; margin: 0;">やるべきことを記録しましょう</p>
    </div>

    <div style="background: white; padding: 32px; border-radius: 24px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
        <form method="post">
            {% csrf_token %}
            
            <div style="margin-bottom: 20px;">
                <label style="display:block; font-weight:700; margin-bottom:8px; font-size:14px;">タイトル</label>
                {{ form.title }}
            </div>
            
            <div style="margin-bottom: 20px;">
                <label style="display:block; font-weight:700; margin-bottom:8px; font-size:14px;">詳細・メモ</label>
                {{ form.description }}
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                <div style="margin-bottom: 20px;">
                    <label style="display:block; font-weight:700; margin-bottom:8px; font-size:14px;">期限</label>
                    {{ form.due_date }}
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display:block; font-weight:700; margin-bottom:8px; font-size:14px;">カテゴリ</label>
                    {{ form.category }}
                </div>
            </div>

            <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: center;">
                <a href="{% url 'board' %}" class="btn" style="background: #f1f5f9; color: var(--text-sub);">
                    キャンセル
                </a>
                <button type="submit" class="btn btn-primary" style="padding: 10px 40px;">
                    保存する
                </button>
            </div>
        </form>
    </div>
    
    {% if form.instance.pk %}
    <div style="text-align: center; margin-top: 20px;">
        <a href="{% url 'task_delete' form.instance.pk %}" style="color: var(--danger); font-size: 13px; text-decoration: none; font-weight: 600;">
            <i class="bi bi-trash"></i> このタスクを削除
        </a>
    </div>
    {% endif %}
</div>

<style>
    /* フォーム内の入力欄をすべて丸く、枠線をきれいに */
    form input[type="text"],
    form input[type="datetime-local"],
    form select,
    form textarea {
        width: 100%;
        padding: 12px 20px;
        border: 1px solid #cbd5e1;
        border-radius: 50px; /* 丸み */
        background: #f8fafc;
        font-size: 15px;
        outline: none;
        transition: 0.2s;
        box-sizing: border-box;
    }
    
    /* テキストエリアだけは角丸を少し緩める（文字を書きやすくするため） */
    form textarea {
        border-radius: 20px;
        min-height: 120px;
        resize: vertical;
    }

    form input:focus, form select:focus, form textarea:focus {
        border-color: var(--accent-color);
        background: white;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    }
</style>
{% endblock %}